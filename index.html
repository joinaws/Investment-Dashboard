<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Investment Dashboard — Premium Admin</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f3f6fb;
      --sidebar:#0f1724;            /* deep navy */
      --accent-1: linear-gradient(135deg,#0b6cff,#3a8dff);
      --card:#ffffff;
      --muted:#6b7280;
      --glass: rgba(255,255,255,0.6);
      --success:#10b981;
      --danger:#ef4444;
      --shadow: 0 6px 18px rgba(15,23,36,0.08);
      --radius:12px;
      --gap:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Layout */
    .app {
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 24px;
      min-height:100vh;
      padding:24px;
    }

    /* Sidebar */
    .sidebar {
      background: linear-gradient(180deg,#071028 0%, #0f1724 100%);
      border-radius: var(--radius);
      padding:20px;
      color: #e6eefc;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .brand {
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:8px;
    }
    .logo {
      width:44px;height:44px;border-radius:10px;
      background:var(--accent-1);
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:white;
      box-shadow: 0 6px 18px rgba(11,108,255,0.18);
    }
    .brand h3{font-size:1.05rem;margin:0}
    .nav {
      margin-top:8px; display:flex;flex-direction:column; gap:6px;
    }
    .nav a{
      display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;color:rgba(230,238,252,0.95);text-decoration:none;
      font-weight:500;
    }
    .nav a.active{ background: rgba(255,255,255,0.04); box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }

    .sidebar .meta { margin-top:auto; font-size:0.85rem; color:rgba(230,238,252,0.6); }

    /* Main content */
    .main {
      display:flex;flex-direction:column;gap:18px;
      min-height:100vh;
    }

    /* Topbar */
    .topbar {
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;
    }
    .search {
      flex:1; max-width:640px; display:flex; gap:12px; align-items:center;
      background:var(--card); padding:10px 12px; border-radius:10px; box-shadow: var(--shadow);
    }
    .search input{ border:0; outline:0; font-size:0.95rem; width:100%}
    .user {
      display:flex;align-items:center;gap:10px;background:var(--card); padding:8px 10px;border-radius:10px; box-shadow: var(--shadow);
    }
    .avatar {
      width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#6b7280,#9ca3af);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;
    }

    /* Header / hero */
    .hero {
      display:flex;align-items:center;justify-content:space-between;gap:20px;
      background:var(--accent-1); color:white; padding:18px;border-radius:12px; box-shadow: var(--shadow);
    }
    .hero h1{margin:0;font-size:1.25rem;font-weight:600}
    .hero p{margin:0;opacity:0.95;color:rgba(255,255,255,0.9); font-size:0.95rem}

    /* Summary cards */
    .summary {
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:var(--gap);
    }
    .card {
      background:var(--card); border-radius:12px; padding:16px; box-shadow: var(--shadow);
    }
    .kpi { display:flex;align-items:center;justify-content:space-between; }
    .kpi .left{display:flex;flex-direction:column;gap:6px}
    .kpi .value{ font-size:1.35rem; font-weight:700 }
    .kpi .label{ color:var(--muted); font-size:0.9rem }

    /* Grid for charts and table */
    .content-grid {
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:var(--gap);
    }

    .chart-card { height: 340px; display:flex;flex-direction:column; }
    .chart-wrap { flex:1; padding:6px 6px 6px 6px; min-height:200px }

    /* Table */
    .table-card { padding:12px; overflow:auto; }
    table{ width:100%; border-collapse:collapse; font-size:0.95rem; }
    thead th { text-align:left; padding:10px 12px; color:var(--muted); font-weight:600; background:transparent; position:sticky; top:0; }
    tbody tr { border-bottom:1px solid #eef2f7 }
    tbody td { padding:10px 12px; vertical-align:middle }
    .highlight { background:#eef7ff; font-weight:700; padding:6px 8px; border-radius:6px; display:inline-block }

    /* Footer row */
    .table-foot { display:flex; justify-content:space-between; align-items:center; margin-top:10px; gap:8px }

    /* Responsive */
    @media (max-width: 990px){
      .app { grid-template-columns: 1fr; padding:16px; }
      .content-grid { grid-template-columns: 1fr; }
      .summary { grid-template-columns: 1fr; }
    }

  </style>
</head>
<body>
  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sidebar" aria-label="Sidebar navigation">
      <div class="brand">
        <div class="logo">INV</div>
        <div>
          <h3>InvestAdmin</h3>
          <div style="font-size:12px;color:rgba(230,238,252,0.6)">Premium Panel</div>
        </div>
      </div>

      <nav class="nav" role="navigation" aria-label="Main">
        <a class="active" href="#"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:0.9"><path d="M3 13h8V3H3v10zM3 21h8v-6H3v6zM13 21h8V11h-8v10zM13 3v6h8V3h-8z" fill="currentColor"/></svg> Overview</a>
        <a href="#"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M3 13h8V3H3v10z" fill="currentColor"/></svg> Investments</a>
        <a href="#"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 2l3 7h7l-5.5 4 2 7L12 16l-6.5 4 2-7L2 9h7l3-7z" fill="currentColor"/></svg> Reports</a>
        <a href="#"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M12 12c2.7 0 8 1.3 8 4v2H4v-2c0-2.7 5.3-4 8-4zM12 2a4 4 0 110 8 4 4 0 010-8z"/></svg> Team</a>
      </nav>

      <div class="meta">Version 1.2 • Last updated: Nov 28, 2025</div>
    </aside>

    <!-- MAIN -->
    <main class="main">

      <!-- TOPBAR -->
      <div class="topbar">
        <div style="display:flex; gap:12px; align-items:center; width:100%;">
          <div class="search" role="search" aria-label="Search contributions">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:0.6"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <input id="globalSearch" placeholder="Search month or amount (e.g. Jan-25 or 45000)" />
          </div>
        </div>

        <div style="display:flex;gap:12px;align-items:center">
          <div class="user" title="Account">
            <div style="text-align:right;margin-right:8px">
              <div style="font-weight:600">Puneet</div>
              <div style="font-size:12px;color:var(--muted)">Admin</div>
            </div>
            <div class="avatar">P</div>
          </div>
        </div>
      </div>

      <!-- HERO -->
      <div class="hero">
        <div>
          <h1>Investment Dashboard</h1>
          <p>Overview of contributions, expenses and current balance — Premium Admin UI</p>
        </div>

        <div style="display:flex;gap:12px;align-items:center">
          <button id="exportCsv" style="background:rgba(255,255,255,0.12);border:0;padding:10px 12px;border-radius:8px;color:white;font-weight:600;cursor:pointer">Export CSV</button>
          <button style="background:rgba(255,255,255,0.18);border:0;padding:10px 12px;border-radius:8px;color:white;cursor:pointer">Add Entry</button>
        </div>
      </div>

      <!-- KPI SUMMARY -->
      <section class="summary" aria-label="Key metrics">
        <div class="card">
          <div class="kpi">
            <div class="left">
              <div class="label">Total Investment</div>
              <div class="value" id="totalInvestment">—</div>
            </div>
            <div style="text-align:right;color:var(--muted);font-size:12px">All contributors</div>
          </div>
        </div>

        <div class="card">
          <div class="kpi">
            <div class="left">
              <div class="label">Total Expenses</div>
              <div class="value" id="totalExpenses">—</div>
            </div>
            <div style="text-align:right;color:var(--muted);font-size:12px">Fixed & variable</div>
          </div>
        </div>

        <div class="card">
          <div class="kpi">
            <div class="left">
              <div class="label">Available Balance</div>
              <div class="value" id="availableBalance">—</div>
            </div>
            <div style="text-align:right;color:var(--muted);font-size:12px">After expenses</div>
          </div>
        </div>
      </section>

      <!-- CONTENT GRID -->
      <div class="content-grid">

        <!-- Left: Charts -->
        <div class="card chart-card">
          <h3 style="margin:0 0 10px 0">Monthly Contributions (stacked)</h3>
          <div class="chart-wrap">
            <canvas id="contributionsChart" style="width:100%;height:100%"></canvas>
          </div>

          <div style="display:flex;gap:12px;margin-top:12px;align-items:center">
            <small style="color:var(--muted)">Stacked bars show each person's monthly contribution</small>
            <div style="margin-left:auto;color:var(--muted);font-size:13px">Currency: ₹ INR</div>
          </div>
        </div>

        <!-- Right: Expenses -->
        <aside class="card chart-card">
          <h3 style="margin:0 0 10px 0">Expense Breakdown</h3>
          <div class="chart-wrap" style="padding-top:6px">
            <canvas id="expensesChart" style="width:100%;height:100%"></canvas>
          </div>

          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
            <div style="font-size:13px;color:var(--muted)">Top expense: <strong id="topExpense" style="color:#0b6cff"></strong></div>
          </div>
        </aside>

      </div>

      <!-- Table -->
      <section class="card table-card">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h3 style="margin:0">Investment Details</h3>
          <div style="display:flex;gap:8px;align-items:center">
            <label style="font-size:13px;color:var(--muted)">Filter:</label>
            <select id="monthFilter" style="padding:6px;border-radius:6px;border:1px solid #eef2f7">
              <option value="">All months</option>
            </select>
          </div>
        </div>

        <div style="margin-top:12px; overflow:auto;">
          <table id="investmentTable" role="table" aria-label="Investment table">
            <thead>
              <tr>
                <th>Month</th>
                <th>Pankaj (₹)</th>
                <th>Puneet (₹)</th>
                <th>Lucky (₹)</th>
                <th>Total (₹)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="table-foot">
          <div style="color:var(--muted);font-size:13px">Showing <span id="rowsCount">0</span> rows</div>
          <div style="display:flex;gap:12px;align-items:center">
            <div style="font-size:13px;color:var(--muted)">Grand Total:</div>
            <div class="highlight" id="grandTotal">—</div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    /***********************
     * Data (kept from original)
     ***********************/
    const investmentData = [
      { month: 'Jan-23', pankaj: 0, puneet: 0, lucky: 20000, total: 20000, note: 'Pankaj Received 20000' },
      { month: 'Feb-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Mar-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Apr-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'May-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Jun-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Jul-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Aug-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Sep-23', pankaj: 0, puneet: 0, lucky: 0, total: 0 },
      { month: 'Oct-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Nov-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Dec-23', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Jan-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Feb-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Mar-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Apr-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'May-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Jun-24', pankaj: 0, puneet: 20000, lucky: 20000, total: 40000 },
      { month: 'Jul-24', pankaj: 0, puneet: 0, lucky: 0, total: 0 },
      { month: 'Aug-24', pankaj: 0, puneet: 0, lucky: 0, total: 0 },
      { month: 'Sep-24', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Oct-24', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Nov-24', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Dec-24', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Jan-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Feb-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Mar-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Apr-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'May-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Jun-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Jul-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Aug-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Sep-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 },
      { month: 'Oct-25', pankaj: 15000, puneet: 15000, lucky: 15000, total: 45000 }
    ];

    const expenseData = [
      { category: 'Shiwpur Khet Me', amount: 280000 },
      { category: 'Pankaj (Delhi Home Loan)', amount: 126000 },
      { category: 'Mitti', amount: 4000 },
      { category: 'Ghar ki Battery', amount: 3700 },
      { category: 'Ped ki katai', amount: 1300 }
    ];

    /***********************
     * Utilities
     ***********************/
    const formatINR = n => '₹' + Number(n).toLocaleString('en-IN');

    /***********************
     * Populate table & summary
     ***********************/
    const tbody = document.querySelector('#investmentTable tbody');
    const monthFilter = document.getElementById('monthFilter');
    const rowsCount = document.getElementById('rowsCount');
    const grandTotalEl = document.getElementById('grandTotal');

    function renderTable(filter=''){
      tbody.innerHTML = '';
      const filtered = investmentData.filter(r => {
        if (!filter) return true;
        return r.month.toLowerCase().includes(filter.toLowerCase());
      });
      filtered.forEach(r => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${r.month}${r.note?'<div style="font-size:12px;color:var(--muted)">'+r.note+'</div>':''}</td>
          <td>${formatINR(r.pankaj)}</td>
          <td>${formatINR(r.puneet)}</td>
          <td>${formatINR(r.lucky)}</td>
          <td><span class="highlight">${formatINR(r.total)}</span></td>
        `;
        tbody.appendChild(tr);
      });
      rowsCount.textContent = filtered.length;
      const grand = filtered.reduce((s,x)=>s+x.total,0);
      grandTotalEl.textContent = formatINR(grand);
    }

    // Fill month filter options
    (function populateMonthFilter(){
      const sel = monthFilter;
      const months = [...new Set(investmentData.map(d=>d.month))];
      months.forEach(m=>{
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        sel.appendChild(opt);
      });
    })();

    // Summary KPIs
    const totalInvestment = investmentData.reduce((s,x)=>s+x.total,0);
    const totalExpenses = expenseData.reduce((s,x)=>s+x.amount,0);
    const availableBalance = totalInvestment - totalExpenses;

    document.getElementById('totalInvestment').textContent = formatINR(totalInvestment);
    document.getElementById('totalExpenses').textContent = formatINR(totalExpenses);
    document.getElementById('availableBalance').textContent = formatINR(availableBalance);

    // Initial render
    renderTable();

    // Filters and search
    monthFilter.addEventListener('change', (e)=> renderTable(e.target.value));
    document.getElementById('globalSearch').addEventListener('input', (e)=> renderTable(e.target.value));

    /***********************
     * Charts (Chart.js)
     ***********************/
    const ctxC = document.getElementById('contributionsChart').getContext('2d');
    const labels = investmentData.map(d=>d.month);
    const pankajData = investmentData.map(d=>d.pankaj);
    const puneetData = investmentData.map(d=>d.puneet);
    const luckyData = investmentData.map(d=>d.lucky);

    // stacked bar
    new Chart(ctxC, {
      type: 'bar',
      data: {
        labels,
        datasets: [
          { label: 'Pankaj', data: pankajData, backgroundColor: '#0b6cff' },
          { label: 'Puneet', data: puneetData, backgroundColor: '#06b6d4' },
          { label: 'Lucky', data: luckyData, backgroundColor: '#f97316' }
        ]
      },
      options: {
        responsive:true,
        maintainAspectRatio:false,
        plugins:{
          title:{display:false},
          tooltip: {
            callbacks: {
              label: ctx => `${ctx.dataset.label}: ${formatINR(ctx.raw)}`
            }
          },
          legend:{position:'top'}
        },
        scales:{
          x:{ stacked:true, ticks:{maxRotation:45,minRotation:0} },
          y:{ stacked:true, beginAtZero:true, title:{display:true,text:'Amount (₹)'} }
        }
      }
    });

    // expenses doughnut
    const ctxE = document.getElementById('expensesChart').getContext('2d');
    const expenseAmounts = expenseData.map(e => e.amount);
    const expenseLabels = expenseData.map(e => e.category);
    const expenseColors = ['#7c3aed','#0b6cff','#f59e0b','#ef4444','#10b981'];

    const totalExpense = expenseAmounts.reduce((a,b)=>a+b,0);
    document.getElementById('topExpense').textContent = `${expenseData[0].category} • ${formatINR(expenseData[0].amount)}`;

    new Chart(ctxE, {
      type: 'doughnut',
      data: {
        labels: expenseLabels,
        datasets: [{ data: expenseAmounts, backgroundColor: expenseColors }]
      },
      options: {
        responsive:true, maintainAspectRatio:false,
        plugins:{
          legend:{ position:'bottom', labels:{usePointStyle:true}},
          tooltip:{
            callbacks:{
              label: ctx => {
                const v = ctx.raw;
                const pct = ((v/totalExpense)*100).toFixed(1);
                return `${ctx.label}: ${formatINR(v)} (${pct}%)`;
              }
            }
          }
        }
      }
    });

    /***********************
     * Export CSV
     ***********************/
    document.getElementById('exportCsv').addEventListener('click', () => {
      const headers = ['Month','Pankaj','Puneet','Lucky','Total'];
      const rows = investmentData.map(r => [r.month, r.pankaj, r.puneet, r.lucky, r.total]);
      let csv = headers.join(',') + '\n' + rows.map(r => r.join(',')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'investment-data.csv';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

  </script>
</body>
</html>
